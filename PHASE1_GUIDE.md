# Phase 1: HTTP API κΈ°λ° STT μ„λ²„ ν…μ¤νΈ κ°€μ΄λ“

## π“‹ κµ¬ν„ ν„ν™©

β… **μ„λ²„ μ½”λ“**: [server.py](server.py) - Flask κΈ°λ° HTTP API (ν¬νΈ: 8000)
β… **ν΄λΌμ΄μ–ΈνΈ μ½”λ“**: [client.py](client.py) - μμ„± λ…Ήμ + μ„λ²„ μ „μ†΅

> β οΈ **macOS μ‚¬μ©μ**: ν¬νΈ 5000μ€ AirPlay Receiverκ°€ μ‚¬μ©ν•λ―€λ΅ 8000 ν¬νΈλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

## π€ μ‹¤ν–‰ λ°©λ²•

### 1λ‹¨κ³„: ν•„μ ν¨ν‚¤μ§€ μ„¤μΉ

```bash
# κΈ°λ³Έ ν¨ν‚¤μ§€ (μ΄λ―Έ μ„¤μΉλμ–΄ μμ)
pip install torch openai-whisper librosa deep-translator

# μ¶”κ°€ ν¨ν‚¤μ§€ (Flask, pyaudio)
pip install flask requests pyaudio
```

**macOSμ—μ„ pyaudio μ„¤μΉ μ‹ μ—λ¬ λ°μƒν•λ©΄:**
```bash
brew install portaudio
pip install pyaudio
```

**Windowsμ—μ„ pyaudio μ„¤μΉ μ‹ μ—λ¬ λ°μƒν•λ©΄:**
```bash
pip install pipwin
pipwin install pyaudio
```

---

### 2λ‹¨κ³„: μ„λ²„ μ‹¤ν–‰ (ν€ μ»΄ν“¨ν„°)

```bash
# μ„λ²„ μ‹μ‘
python server.py
```

**μ •μƒ μ‹¤ν–‰ μ‹ μ¶λ ¥:**
```
π¤– Whisper λ¨λΈ λ΅λ”© μ¤‘...
β… λ¨λΈ λ΅λ“ μ™„λ£ (device=cpu)
============================================================
π€ STT μ„λ²„ μ‹μ‘
============================================================
π“΅ μ ‘μ† μ£Όμ†: http://0.0.0.0:8000
π”— Health Check: http://0.0.0.0:8000/health
π¤ STT μ—”λ“ν¬μΈνΈ: http://0.0.0.0:8000/stt
============================================================
 * Serving Flask app 'server'
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8000
 * Running on http://192.168.0.XXX:8000
```

**π“ μ¤‘μ”:** `http://192.168.0.XXX:8000` μ£Όμ†λ¥Ό λ©”λ¨ν•΄λ‘μ„Έμ”! (ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©)

---

### 3λ‹¨κ³„: μ„λ²„ IP ν™•μΈ

#### macOS/Linux:
```bash
ifconfig | grep "inet "
```

#### Windows:
```bash
ipconfig
```

**μμ‹:** `192.168.0.10` (μ΄ μ£Όμ†λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©)

---

### 4λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (λ‹¤λ¥Έ μ»΄ν“¨ν„°/ν΄λ€ν°)

#### μµμ… 1: κ°™μ€ μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈ (localhost)

```bash
# 5μ΄ λ…Ήμ ν›„ μ „μ†΅
python client.py

# 10μ΄ λ…Ήμ
python client.py --duration 10
```

#### μµμ… 2: λ‹¤λ¥Έ μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈ

```bash
# μ„λ²„ μ£Όμ†λ¥Ό μ§μ ‘ μ§€μ •
python client.py --server http://192.168.0.10:8000/stt

# 10μ΄ λ…Ήμ
python client.py --server http://192.168.0.10:8000/stt --duration 10
```

#### μµμ… 3: κΈ°μ΅΄ μ¤λ””μ¤ νμΌ μ „μ†΅ (λ…Ήμ κ±΄λ„λ›°κΈ°)

```bash
# audio_data ν΄λ”μ νμΌ μ „μ†΅
python client.py --audio audio_data/test.wav --server http://192.168.0.10:8000/stt
```

---

## π― μ‹¤ν–‰ κ²°κ³Ό μμ‹

### ν΄λΌμ΄μ–ΈνΈ μ¶λ ¥:

```
============================================================
π™οΈ  STT ν΄λΌμ΄μ–ΈνΈ
============================================================
β… μ„λ²„ μ—°κ²° μ„±κ³µ
   λ¨λΈ: base
   λ””λ°”μ΄μ¤: cpu
π¤ λ…Ήμ μ‹μ‘... (5μ΄)
   1μ΄...
   2μ΄...
   3μ΄...
   4μ΄...
   5μ΄...
β… λ…Ήμ μ™„λ£
π“¤ μ„λ²„λ΅ μ „μ†΅ μ¤‘: http://192.168.0.10:8000/stt

============================================================
β… STT μ²λ¦¬ μ™„λ£
============================================================
π κ°μ§€ μ–Έμ–΄: ko
π“ μ›λ¬Έ: μ•λ…•ν•μ„Έμ”. ν…μ¤νΈ μμ„±μ…λ‹λ‹¤.
π λ²μ—­: Hello. This is a test voice.
============================================================

π§Ή μ„μ‹ νμΌ μ‚­μ : temp_recording.wav
```

### μ„λ²„ μ¶λ ¥:

```
π“¥ μ¤λ””μ¤ νμΌ μμ‹ : temp_recording.wav
π¤ μμ„± μΈμ‹ μ²λ¦¬ μ¤‘...
π κ°μ§€ μ–Έμ–΄: ko
π“ μΈμ‹ κ²°κ³Ό: μ•λ…•ν•μ„Έμ”. ν…μ¤νΈ μμ„±μ…λ‹λ‹¤.
π λ²μ—­ μ™„λ£: Hello. This is a test voice.
127.0.0.1 - - [15/Oct/2025 14:30:45] "POST /stt HTTP/1.1" 200 -
```

---

## β οΈ λ¬Έμ  ν•΄κ²°

### 0. "Address already in use" (ν¬νΈ μ‚¬μ© μ¤‘) μ—λ¬

**μ›μΈ:** macOSμ—μ„ ν¬νΈ 5000μ΄ AirPlay Receiverμ— μν•΄ μ‚¬μ©λκ³  μμµλ‹λ‹¤.

**ν•΄κ²°:**
- β… μ΄λ―Έ μ½”λ“κ°€ ν¬νΈ 8000μΌλ΅ λ³€κ²½λμ–΄ μμ
- λλ” AirPlay Receiver λΉ„ν™μ„±ν™”: μ‹μ¤ν… ν™κ²½μ„¤μ • β†’ μΌλ° β†’ AirDrop λ° Handoff β†’ "AirPlay μμ‹ κΈ°" λ„κΈ°

### 1. "μ„λ²„ μ—°κ²° μ‹¤ν¨" μ—λ¬

**μ›μΈ:** μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μ΄ μ•„λ‹κ±°λ‚ μ£Όμ†κ°€ ν‹€λ Έμµλ‹λ‹¤.

**ν•΄κ²°:**
- μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ: `python server.py`
- μ„λ²„ IP μ£Όμ†κ°€ λ§λ”μ§€ ν™•μΈ
- λ°©ν™”λ²½ μ„¤μ • ν™•μΈ (8000 ν¬νΈ μ—΄κΈ°)

### 2. "No audio file provided" μ—λ¬

**μ›μΈ:** ν΄λΌμ΄μ–ΈνΈμ—μ„ μ¤λ””μ¤ νμΌμ„ μ λ€λ΅ μ „μ†΅ν•μ§€ λ»ν–μµλ‹λ‹¤.

**ν•΄κ²°:**
- λ§μ΄ν¬ κ¶ν• ν™•μΈ (macOS: μ‹μ¤ν… ν™κ²½μ„¤μ • β†’ λ³΄μ• λ° κ°μΈμ •λ³΄λ³΄νΈ)
- pyaudioκ°€ μ λ€λ΅ μ„¤μΉλμ—λ”μ§€ ν™•μΈ

### 3. λ²μ—­ μ‹¤ν¨ "(λ²μ—­ μ‹¤ν¨)"

**μ›μΈ:** μΈν„°λ„· μ—°κ²° λ¬Έμ  (GoogleTranslatorλ” μΈν„°λ„· ν•„μ”)

**ν•΄κ²°:**
- μΈν„°λ„· μ—°κ²° ν™•μΈ
- deep-translator μ¬μ„¤μΉ: `pip install --upgrade deep-translator`

### 4. λ¨λΈ λ΅λ”©μ΄ λ„λ¬΄ λλ¦Ό

**ν•΄κ²°:**
- λ” μ‘μ€ λ¨λΈ μ‚¬μ©: [server.py:21](server.py#L21)μ—μ„ `"base"` β†’ `"tiny"` λ³€κ²½
- GPU μ‚¬μ© (CUDA μ‚¬μ© κ°€λ¥ν• κ²½μ° μλ™μΌλ΅ GPU μ‚¬μ©)

### 5. macOSμ—μ„ λ°©ν™”λ²½ μ„¤μ •

```
μ‹μ¤ν… ν™κ²½μ„¤μ • β†’ λ³΄μ• λ° κ°μΈμ •λ³΄λ³΄νΈ β†’ λ°©ν™”λ²½ β†’ λ°©ν™”λ²½ μµμ…
β†’ "Python"μ— λ€ν• μμ‹  μ—°κ²° ν—μ©
```

### 6. Windowsμ—μ„ λ°©ν™”λ²½ μ„¤μ •

```
μ μ–΄ν β†’ Windows Defender λ°©ν™”λ²½ β†’ κ³ κΈ‰ μ„¤μ •
β†’ μΈλ°”μ΄λ“ κ·μΉ™ β†’ μƒ κ·μΉ™ β†’ ν¬νΈ β†’ TCP 8000 ν—μ©
```

---

## π” μ„λ²„ μƒνƒ ν™•μΈ

μ›Ή λΈλΌμ°μ €λ‚ curlλ΅ μ„λ²„ μƒνƒλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤:

```bash
# λΈλΌμ°μ €μ—μ„ μ ‘μ†
http://μ„λ²„IP:8000/health

# λλ” ν„°λ―Έλ„μ—μ„
curl http://μ„λ²„IP:8000/health
```

**μ •μƒ μ‘λ‹µ:**
```json
{
  "status": "ok",
  "model": "base",
  "device": "cpu"
}
```

---

## π“± ν΄λ€ν°μ—μ„ ν…μ¤νΈ (κ³ κΈ‰)

Pythonμ΄ μ„¤μΉλ ν΄λ€ν°μ€ λ“λ¬ΌκΈ° λ•λ¬Έμ—, λ‹¤μ λ‹¨κ³„λ΅ **μ›Ή κΈ°λ° ν΄λΌμ΄μ–ΈνΈ**λ¥Ό λ§λ“¤λ©΄ ν΄λ€ν° λΈλΌμ°μ €μ—μ„ λ°”λ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

### κ°„λ‹¨ν• ν…μ¤νΈ λ°©λ²•:

1. **Postman** λλ” **HTTP ν…μ¤νΈ μ•±** μ‚¬μ©
2. ν΄λ€ν°μ—μ„ μ¤λ””μ¤ λ…Ήμ ν›„ μ„λ²„λ΅ POST μ”μ²­
3. μ‘λ‹µ JSON ν™•μΈ

---

## π“ μ£Όμ” λ…λ Ήμ–΄ μ •λ¦¬

```bash
# μ„λ²„ μ‹¤ν–‰ (ν€ μ»΄ν“¨ν„°)
python server.py

# ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (κΈ°λ³Έ - 5μ΄ λ…Ήμ)
python client.py

# ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (μ„λ²„ μ£Όμ† μ§€μ •)
python client.py --server http://192.168.0.10:8000/stt

# ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (10μ΄ λ…Ήμ)
python client.py --duration 10

# ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ (κΈ°μ΅΄ νμΌ μ „μ†΅)
python client.py --audio audio_data/test.wav --server http://192.168.0.10:8000/stt

# μ„λ²„ IP ν™•μΈ (macOS/Linux)
ifconfig | grep "inet "

# μ„λ²„ IP ν™•μΈ (Windows)
ipconfig
```

---

## π“ Phase 1 κ²€μ¦ μ²΄ν¬λ¦¬μ¤νΈ

- [ ] μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λ¨
- [ ] ν΄λΌμ΄μ–ΈνΈμ—μ„ λ§μ΄ν¬ λ…Ήμμ΄ λ¨
- [ ] κ°™μ€ μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈ μ„±κ³µ (localhost)
- [ ] λ‹¤λ¥Έ μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈ μ„±κ³µ (λ΅μ»¬ λ„¤νΈμ›ν¬)
- [ ] ν•κµ­μ–΄ β†’ μμ–΄ λ²μ—­ μ •μƒ μ‘λ™
- [ ] μμ–΄ β†’ ν•κµ­μ–΄ λ²μ—­ μ •μƒ μ‘λ™
- [ ] μ—λ¬ ν•Έλ“¤λ§ ν™•μΈ (μλ»λ νμΌ, μ„λ²„ μ¤‘λ‹¨ λ“±)

---

## π€ λ‹¤μ λ‹¨κ³„: Phase 2

Phase 1μ΄ μ •μƒ μ‘λ™ν•λ©΄, λ‹¤μμ€ **WebSocket κΈ°λ° μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ°**μ„ κµ¬ν„ν•©λ‹λ‹¤.

**Phase 2μ—μ„ κµ¬ν„ν•  κ²ƒ:**
- μ‹¤μ‹κ°„ μ¤λ””μ¤ μ¤νΈλ¦¬λ° (λ…Ήμν•λ©΄μ„ λ™μ‹μ— μ „μ†΅)
- λ¶€λ¶„ κ²°κ³Ό μ‹¤μ‹κ°„ μ¶λ ¥ (interim results)
- λ” λ‚®μ€ μ§€μ—°μ‹κ°„ (latency)

---

## π’΅ ν

1. **μ²μμ—λ” κ°™μ€ μ»΄ν“¨ν„°μ—μ„ ν…μ¤νΈ**ν•μ—¬ μ „μ²΄ νλ¦„μ„ ν™•μΈ
2. **λ΅κ·Έλ¥Ό μ ν™•μΈ**ν•λ©΄ λ¬Έμ  ν•΄κ²°μ΄ μ‰¬μ›€
3. **μ‘μ€ λ¨λΈ(tiny)λ΅ μ‹μ‘**ν•΄μ„ λΉ λ¥΄κ² ν…μ¤νΈ
4. **μ„λ²„λ” ν• λ²λ§ μ‹¤ν–‰**ν•κ³ , ν΄λΌμ΄μ–ΈνΈλ¥Ό μ—¬λ¬ λ² μ‹¤ν–‰ κ°€λ¥
5. **Ctrl+C**λ΅ μ„λ²„ μΆ…λ£ κ°€λ¥

---

## π“ μ¶”κ°€ λ„μ›€μ΄ ν•„μ”ν•λ©΄

μ—λ¬ λ©”μ‹μ§€μ™€ ν•¨κ» λ‹¤μ μ •λ³΄λ¥Ό μ κ³µν•μ„Έμ”:
- μ΄μμ²΄μ  (macOS/Windows/Linux)
- Python λ²„μ „: `python --version`
- μ‹¤ν–‰ν• λ…λ Ήμ–΄
- μ„λ²„/ν΄λΌμ΄μ–ΈνΈ μ¶λ ¥ λ΅κ·Έ